---
import siteData from '../data/site-data.json';
const { empresa } = siteData;
---

<nav id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <a href="#" class="flex items-center space-x-3">
        <img src={empresa.logo} alt={empresa.nombre} class="h-14 w-auto" />
        <div class="flex flex-col">
          <span class="text-lg font-bold leading-tight">
            <span class="text-[#0B2C33]">GAIVANS</span> <span class="text-primary">KAMACHO</span>
          </span>
          <span class="text-xs text-gray-300">Alquiler de Veh√≠culos</span>
        </div>
      </a>
      
      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center space-x-8">
        <a href="#nosotros" class="text-white hover:text-primary transition-colors duration-300 font-medium">
          Nosotros
        </a>
        <a href="#flota" class="text-white hover:text-primary transition-colors duration-300 font-medium">
          Flota
        </a>
        <a href="#contacto" class="text-white hover:text-primary transition-colors duration-300 font-medium">
          Contacto
        </a>
      </div>
      
      <!-- Mobile Menu Button -->
      <button id="mobile-menu-btn" class="md:hidden text-white focus:outline-none">
        <i class="fas fa-bars text-2xl"></i>
      </button>
    </div>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden pb-4">
      <div class="flex flex-col space-y-4">
        <a href="#nosotros" class="text-white hover:text-primary transition-colors duration-300 font-medium">
          Nosotros
        </a>
        <a href="#flota" class="text-white hover:text-primary transition-colors duration-300 font-medium">
          Flota
        </a>
        <a href="#contacto" class="text-white hover:text-primary transition-colors duration-300 font-medium">
          Contacto
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  // Optimizado: Navbar scroll effect con throttle
  const navbar = document.getElementById('navbar');
  let ticking = false;
  let lastScrollY = 0;
  
  function updateNavbar() {
    if (lastScrollY > 50) {
      navbar?.classList.add('bg-dark/95', 'backdrop-blur-md', 'shadow-lg');
      navbar?.classList.remove('bg-transparent');
    } else {
      navbar?.classList.remove('bg-dark/95', 'backdrop-blur-md', 'shadow-lg');
      navbar?.classList.add('bg-transparent');
    }
    ticking = false;
  }
  
  window.addEventListener('scroll', () => {
    lastScrollY = window.scrollY;
    if (!ticking) {
      requestAnimationFrame(updateNavbar);
      ticking = true;
    }
  }, { passive: true });
  
  // Mobile menu toggle
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  
  mobileMenuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
    const icon = mobileMenuBtn.querySelector('i');
    if (icon) {
      icon.classList.toggle('fa-bars');
      icon.classList.toggle('fa-times');
    }
  });
  
  // Close mobile menu when clicking a link
  mobileMenu?.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
      const icon = mobileMenuBtn?.querySelector('i');
      if (icon) {
        icon.classList.add('fa-bars');
        icon.classList.remove('fa-times');
      }
    });
  });
</script>
